<!DOCTYPE html>
<html>

<head>
    <title>Week 12 In Class</title>
    <style>
        .box {
            position: absolute;
            border-style: solid;
            border-width: 2px;
            width: 300px;
            height: 300px;
        }
    </style>

    <script>


        //=========================================
        //Classes
        class Shape {
            id = 0;
            name = "";
            x = 0;
            y = 0;
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.name = "Shape";
            }
            draw() {
                return "drawing a shape!";
            }
        }

        class Triangle extends Shape {
            constructor(x, y) {
                super(x, y);
                this.name = "Triangle";
            }
            draw() {
                return "drawing a triangle!"
            }
        }

        //=========================================
        //Globals
        var _x_position = 10;
        var _y_position = 50;
        var _width = 300;
        var _height = 300;
        var _offset = 50;

        var _box_id_counter = 1;

        var all_objects = [];


        //=========================================
        //Functions
        var UpdateObject = (object_id)=>{
            //console.log('current id: ', object_id);
            var selected_object;
            for(var index = 0; index < all_objects.length; index++){
                console.log(all_objects[index]);
                if(all_objects[index]["id"] == object_id){
                    selected_object = all_objects[index];
                    console.log('object found!');
                }
            }

            if(selected_object){
            //get values from html
            var x = document.getElementById(`tb_x_${object_id}`).value;
            var y = document.getElementById('tb_y_'+object_id).value;

            selected_object.x = x;
            selected_object.y = y;

            for(var prop_name in selected_object){
                console.log(`current value ${prop_name}`, selected_object[prop_name]);
            }
            }



        };

        var RenderObject = () => {

            //create 10 objects 
            if (all_objects.length <= 0) {
                for (var object_index = 1; object_index <= 10; object_index++) {
                    var obj = new Triangle(object_index, object_index + 1);
                    obj.id = object_index;
                    all_objects.push(obj);
                }

            }


            var div_object = "";
            for (var index = 0; index < all_objects.length; index++) {

                div_object += `<div id='box_${_box_id_counter++}' class='box' style='left:${_x_position}px; top:${_y_position}px;'>`;
                //iterate object properties
                for (var prop_name in all_objects[index]) {
                    //optional.... ignore the following property
                    if (prop_name == "name") continue;
                    //create labels and input text boxes
                    div_object += `<p>${prop_name}: <input id='tb_${prop_name}_${all_objects[index].id}' type='text' value='${all_objects[index][prop_name]}'/></p>`
                   
                }
                div_object += `<p><input type='button' onclick='UpdateObject(${all_objects[index].id})' value='Update Object'/></p>`;
                div_object += "</div>";
                if (_x_position > 1500) {
                    _x_position = 10;
                    _y_position += _height + _offset;
                }
                else {
                    _x_position += _width + _offset;
                }
                console.log("x position: ", _x_position);
                console.log("y position", _y_position);
            }

            document.getElementById('main_container').innerHTML = div_object;

        };

    </script>

</head>

<body>
    <input type="button" value="Render Object" onclick="RenderObject()" />
    <div id="main_container">
        <!-- <div id='myuniqueid' class="box" style="left:10px; top:60px;"></div>
        <div id='myuniqueid' class="box" style="left:360px; top:60px;"></div> -->
    </div>

</body>

</html>