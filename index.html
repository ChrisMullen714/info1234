<!DOCTYPE html>
<html>

<head>
    <title>Week 10 In Class</title>
    <script>
        //=============================================
        //Globals
        let _isInit = false;
        let _movies = [];
        let _tv_shows = [];

        //=============================================
        //Classes

        // Digital asset base class
        class DigitalAsset {
            //Properties
            _title = '';
            _rotten_tomatoes = 0;
            _release_year = 1900;
            _description = '';
            _image_path = './assets/images/';
            //type = '';
            //Constructor
            constructor(title, rotten_tomatoes, release_year, description) {
                //Initialize properties using constructor input parameters
                this._title = title;
                this._rotten_tomatoes = rotten_tomatoes;
                this._release_year = release_year;
                this._description = description;

            }
            getBasicInformation() {
                var out = this._title + " has " + this._rotten_tomatoes + " rotten tomatoes ";
                out += ' was released on year: ' + this._release_year + ' description: ' + this._description;
                return out;
            }
            getBasicInformationWithInterpolation() {
                var out = `${this._title} has ${this._rotten_tomatoes} rotten tomatoes, was released on year: ${this._release_year}, description: ${this._description}`;
                return out;
            }
            getMyAssetType() {
                return "I do not have one!";
            }

        }

        //Movie class
        class Movie extends DigitalAsset {

            constructor(title, rotten_tomatoes, release_year) {
                //call parent constuctor
                super(title, rotten_tomatoes, release_year, "Movie");
            }
            getMyAssetType() {
                return "I am a Movie";
            }
        }

        //TVShow class
        class TVShow extends DigitalAsset {
            constructor(title, rotten_tomatoes, release_year) {
                //call parent constuctor
                super(title, rotten_tomatoes, release_year, "TVShow");
            }
            getMyAssetType() {
                return "I am a TV Show";
            }
        }

        //=============================================
        //Functions
        function Init() {
            console.log("Starting Init...");
            _isInit = true;

            // var obj = new DigitalAsset('title', 'rotten', 'release', 'desc');
            // obj.title = 'new title';

            // //print the property names of my DigitalAsset object
            // for(var propName in obj){
            //     console.log('propName: ', propName);
            //     console.log('value: ', obj[propName]);
            // }
        }


        function CreateObjects() {
            console.log("Starting Create Objects...");
            console.log('Is init: ', _isInit);
            //Create 10 movie objects
            for (var movie_index = 0; movie_index < 3; movie_index++) {
                var obj = new Movie(`title_${movie_index}`, movie_index, `202${movie_index}`);
                obj._image_path += 'movie_'+(movie_index+1) + '.jpg'
                _movies.push(obj);
            }

            console.log('total movies: ', _movies.length);

            //create 5 TVshow objects
            for (var tv_show_index = 0; tv_show_index < 5; tv_show_index++) {
                var obj = new TVShow(`tv_title_${tv_show_index}`, tv_show_index + 2, `199${tv_show_index}`);
                //add the tv show to the global array
                _tv_shows.push(obj);
            }
            console.log('total tv shows: ', _tv_shows.length);
        }

        function PrintAssetsInfo() {
            if(!_isInit){
                console.log("system not ready, call init , create objects and then you can call this function!");
                return;
            }

            //Print movies
            var result = "";

            //loop movies array
            for(var index = 0; index < _movies.length; index++){
                //loop current object property name=>value
                for(var propName in _movies[index]){
                    result += propName + ' : ' + _movies[index][propName];
                }
                result += "<br/>"
                result += "<img src='"+_movies[index]._image_path + "' />";
                result += "<br/>";
            }

            //get the html element that we want to use for rendering the values
            document.getElementById('digital_assets').innerHTML = result;

        }

    </script>

    <style>
        .custom-padding {
            padding: 20px;
        }
    </style>
</head>

<body>
    <h1>Week 10 in class example</h1>
    <br />
    <table border="1">
        <tr>
            <td class="custom-padding">
                <input type="button" onclick="Init()" value="Init" />
            </td>
            <td class="custom-padding">
                <input type="button" onclick="CreateObjects()" value="Create Objects" />
            </td>
            <td class="custom-padding">
                <input type="button" onclick="PrintAssetsInfo()" value="Print Assets Information" />
            </td>
        </tr>
    </table>
    <div id='digital_assets'></div>
</body>

</html>